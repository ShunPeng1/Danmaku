==========================
　　MMD 永遠亭セット 
==========================

　　MMD用PMDモデル
　　　　　　Nagisa Takaya
　　(quinsiene and 葡萄P)
　　　　　　　　2009/05/08
--------------------------


■■概要■■
本ファイル群（以下、永遠亭セット）は、モンテコア様が「東方兎歩法」として
販売されたデータをMikuMikuDance（MMD）用にセットアップしたものです。
キャラクタモデル３体（かぐや・えーりん・うどんげ）が梱包されております。
このデータは、MMDに読み込んで頂く事でご利用頂くデータセットとなっております。
このため、データご利用の際にはMikuMikuDanceが別途必要です。
また、ご利用の際は「使用上の注意」を読んでからご利用下さい。




■■履歴■■
rev001.001	: 顔のエッジ表示を修正。かぐやの腕ＩＫボーン階層ミスを修正。
rev001.002	: うどんげの腕ボーン位置を修正。
rev001.003	: かぐやに足なしセットアップを追加。※追加内容は【2.同梱物】欄にも記載。
　　　　　　　Tipsを追加




■■目次■■
 1.使用上の注意
 2.セットアップ構成・同梱物
 3.依存関係
 4.インストールと設定
 5.使用方法
 6.上手く動かす為には【Ｔｉｐｓ】
 7.あとがき




■■1.使用上の注意■■
本、「MMD永遠亭set」に含まれる全てのデータ、またはいずれかのデータを御使用の際は、
次に記載する各項目全てに同意するものとします。
-------------------------------------------------------------------------------
　1.永遠亭セットは、上海アリス幻楽団の二次創作ガイドラインに準じます。
　　　・上海アリス幻楽団ガイドラインはこちら。
　　　　http://www.geocities.co.jp/Playtown-Yoyo/1736/t-081.html
　
　2.永遠亭セットは、モンテコア様【東方兎歩法】の利用規約に準じます。
　++++++++++++++++++　東方兎歩法より利用規約を転載　++++++++++++++++++++++++++++
　　　・レンダリング画像、ム−ビー、自作ゲーム等あらゆる用途にご利用頂けます。
　　　・ポリゴンを削ったり増やしたり、骨構造やウェイトの改変、巨乳への
　　　　魔改造などもＯＫです。自由にいじってください。
　　　・改変したデータ、レンダリング画像は、商用、フリーに関わらず
　　　　お使いいただけます。
　　　・データ作成者（モンテコア）に許可を取ったり報告する必要はありません。
　++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

　3.本データを使用して発生したいかなる損害・損失・その他の不利益に対して、
　　作者(Nagisa Takaya および モンテコア)は一切の責任を負いません。
　　本データの使用は自己責任の元、御使用下さい。
-------------------------------------------------------------------------------




■■2.セットアップ構成・同梱物■■
永遠亭セットは、次の構成となっています。
ポリゴン数は全モデル共に、12000ポリゴン前後のフルテクスチャモデルです。


-(インストールディレクトリ)
  |
  |-1.  うどんげ_fs001.pmd
  |　　　　　・うどんげモデルファイル
  |　　　　　・初音ミクと９割程度同一な互換を持ちます。初心者向きです。
  |
  |
  |-2.  えーりん_fs001_スカートセンター追従.pmd 
  |　　　　　・えーりんモデルファイル
  |　　　　　・初音ミクと７割程度同一の互換を持ちます。中級者向きです。
  |　　　　　・スカートＩＫがセンターに追従します。
  |　　　　　　手間が掛かりますが、綺麗なモーションを作成できます。
  |
  |
  |-3.  えーりん_fs002_スカート足追従.pmd
  |　　　　　・えーりんモデルファイル
  |　　　　　・初音ミクと７割程度同一の互換を持ちます。初級者向きです。
  |　　　　　・スカートＩＫが足ＩＫに追従します。簡単にモーションを構築できます。
  |　　　　　　なお、スカートＩＫはやや下方向にもっていっておくと破綻しずらいです。
  |
  |
  |-4.  かぐや_fs001_スカート内側なし_スカート足追従.pmd
  |　　　　　・かぐやモデルファイル　スカート内側メッシュを削除済
  |　　　　　・初音ミクと５割程度同一の互換を持ちます。中級者向きです。
  |　　　　　・スカートＩＫが足ＩＫに追従します。簡単にモーションを構築できます。
  |　　　　　　ロングスカート根元をやや外側に向けてください。
  |　　　　　　大きな動きでなければ、殆ど破綻せずにスカートを動かせます。
  |
  |
  |-5.  かぐや_fs002_スカート内側なし_スカートセンター追従.pmd
  |　　　　　・かぐやモデルファイル　スカート内側メッシュを削除済
  |　　　　　・初音ミクと３割程度同一の互換を持ちます。上級者向きです。
  |　　　　　・スカートＩＫがセンターＩＫに追従します。モーション構築に非常に難があります。
  |　　　　　　ただし、スカートを開いた状態で足を動かす場合、こちらの方が破綻しません。
  |
  |
  |-6.  かぐや_fs101_スカート内側あり_スカート足追従.pmd
  |　　　　　・かぐやモデルファイル
  |　　　　　・セットアップ内容はNr.4と同一です。
  |　　　　　　ただしこちらはスカートの内側を消していません。
  |　　　　　　スカートを開いた際のアオリカメラに使用します。
  |
  |
  |-7.  かぐや_fs102_スカート内側あり_スカートセンター追従.pmd
  |　　　　　・かぐやモデルファイル
  |　　　　　・セットアップ内容はNr.5と同一です。
  |　　　　　　ただしこちらはスカートの内側を消していません。
  |　　　　　　スカートを開いた際のアオリカメラに使用します。
  |
  |
  |-8.  かぐや_fs201_足なし_スカート足追従.pmd.pmd
  |　　　　　・かぐやモデルファイル
  |　　　　　・セットアップ内容はNr.4と同一です。
  |　　　　　　こちらは、足を削除しています。
  |　　　　　　簡単にモーション流用する場合には良いかも知れません。
  |　　　　　
  |　　　　　
  |-9.  各種bmpファイル
  |　　　　　・テクスチャファイルです。大きめのサイズを使用しています。
  |　　　　　　動作が重い場合、Nr.9のテクスチャに変更してください。
  |　　　　　
  |　　　　　
  |-10. HarfSize_Tex
  |　　　　　・小さめのサイズのテクスチャが格納されています。
  |　　　　　　動作が重い場合、この中のファイルを各モデルファイル(pmd)と同じ
  |　　　　　　ディレクトリに置いて頂くと、動作が軽くなるかも知れません。
  |　　　　　　
  |　　　　　　
  |-11. Data\toon8.bmp
  |　　　　　・MikuMikuDanceのトゥーンシェーディング設定ファイルです。
  |　　　　　　服の陰に使用します。
  |　　　　　・「MikuMikuDance\Data」配下にコピペしてください。
  |　　　　　　
  |　　　　　　
  |-12. Data\toon2.bmp
  |　　　　　・MikuMikuDanceのトゥーンシェーディング設定ファイルです。
  |　　　　　　肌の陰に使用します。
  |　　　　　・ＭＭＤ標準のシェーダ設定ファイルですが、色調を少し弄ってあります。
  |　　　　　・「MikuMikuDance\Data」配下にコピペして上書きしてください。
  |　　　　　　※元ファイルは必ずバックアップを取ってください。
  |　　　　　　
  |　　　　　　
  |-13. readme.txt
   　　　　　・本ファイルです。




■■3.依存関係■■
永遠亭セットのpmdモデルは、以下のファイルに依存します。


    -----依存元-----    ->  -----依存対象-----
1.  全PMDファイル       ->  toon2.bmp, toon8.bmp  ※MMDトゥーンシェーダ設定ファイル

2.  うどんげ〜〜.pmd    ->  udonge_Suit_01.bmp　　　服テクスチャ
                        ->  udonge_Hair_01.bmp　　　髪テクスチャ
                        ->  Udonge_allbody.bmp　　　肌テクスチャ

3.  えーりん〜〜.pmd    ->  Eirin_cloth_01.bmp　　　服テクスチャ
                        ->  Eirin_Hair_01.bmp 　　　髪テクスチャ
                        ->  Eirin_Allbody.bmp 　　　肌テクスチャ

4.  かぐや〜〜.pmd      ->  kaguya_Fuku_01.bmp　　　服テクスチャ
                        ->  kaguya_Hair_01.bmp　　　髪テクスチャ
                        ->  kaguya_body.bmp   　　　肌テクスチャ




■■4.インストールと設定■■
永遠亭セットのインストールは、次に記載する方法で行ってください。

1. インストール
    1-1. 解凍後の【永遠亭set】ディレクトリを【MikuMikuDance\UserFile\Model】配下に置いてください。
    
    1-2. 【永遠亭set\Data\toon2.bmp】及び【永遠亭set\Data\toon8.bmp】を
    　　 【MikuMikuDance\Data】配下にコピーしてください。
    　　 なお、ファイルの上書きに気をつけてください。
    　　 ※toon2.bmpは、既存のtoon2.bmpの色調を少し改変したものです。
    　　 　現行の階調設定で表示したいという場合、toon2.bmpは上書きする必要はありません。

    1-3. MMD上にモデルを読み込んだ際、シェーディングが再現されている事を確認します。


2. 動作が重い場合の対処
     MMDの動作が重い場合、テクスチャがメモリを圧迫している事が原因である場合があります。
     ４分の１サイズのテクスチャを同梱してありますので、こちらを使用すると動作が軽くなるかもしれません。
     下記、手順を記載します。
     
    2-1.【永遠亭set】配下のbmpファイルを適当なディレクトリにバックアップします。
    
    2-2.【永遠亭set\HarfSize_Tex】配下のファイルを【永遠亭set】配下にコピーします。 
    
    2-3. MMD上にモデルを読み込んだ際、テクスチャが再現されている事を確認します。




■■5.使用方法■■
MMDに読み込んで使用する際、以下の注意点があります。


●モーション流用について
現行の「初音ミク」等のモーションを流用する場合、「腕ＩＫ」を切る必要があります。
　１．画面左下メニューの【モデル操作】より設定を変更したいモデルを選択します。
　２．プルダウンメニューより、【左腕ＩＫ】・【右腕ＩＫ】を選択します。
　３．ＩＫチェックボックスの【OFF】にチェックを入れます。
　４．画面左のタイムラインが【0】フレームであることを確認し、【モデル操作】の【登録】を押下します。
　５．モーションが正しく動いている事を確認します。


●【※重要！】ロングスカートの足追従の使い方
かぐや・えーりんの足追従版を使用する場合、前後の【〜ロングスカート〜１】のボーンを
少し外側に回転させて登録しておきます。
すると、スカートが足にだいたい追従するようになります。
スカートの調整作業を格段に減らせるため、楽です。

また、かぐやの【〜スカート前】ボーンは前足に追従します。
ただし、【〜スカート後】ボーンは追従しません。
セットアップの差異に気をつけてください。


●ＩＫ／ＦＫについて
このモデル群はＦＫでモデルを動かす事を想定していません。
むやみにＩＫを切ると、いつまでたっても動画が完成しませんので。念のため。


●【〜〜親】ボーンについて
ロングヘアや前髪、リボン、胸、耳には【〜〜親】ボーンを作成してあります。
リボン・胸は【回転影響下】設定となっており、親ボーンの回転に追従しますので、
簡単なループモーションを作成する際はこちらを使用すると楽かと思います。
ロングヘアや耳ＩＫは【回転と移動】ボーンの配下に設定してありますので、
こちらも同様に、簡単なループモーション作成が楽にできると思います。
ただし、これら【〜〜親】ボーンを多用すると、他モデルとの互換性が薄れますのでご注意下さい。


●表情モーフについて
表情モーフは、【え】の形を基本としてセットアップしています。
このため、口を閉じるには、【ん】をmaxにする必要があります。
しかしながら、この状態で【あ】をmaxにしても、口の開きが小さく、期待する絵にならないかと思います。
ですので、【あ】をmaxにしつつ、同時に【ん】をminにしてご使用下さい。
ちなみに、【え】は反応しません。
ですので、リップは【初音ミク】と非互換となっています。
セットアップミスです。すみません。
なお、本障害の修正は広大な手戻りとなるため、修正は行えません。ご了承下さい。


●全ての親について
セットアップは、【全ての親】ボーンを３段にセットアップしてあります。
※【全ての親】は、いわゆるGlobal相当のボーンです。
今回、構成は次の親子関係とＩＤ番号を持っています。
-----------------------------
ID  : 親ID : ボーン名称
0   : 3    : センター
1   : -1   : 全ての親3
2   : 1    : 全ての親2
3   : 2    : 全ての親
-----------------------------

このセットアップにより、【全ての親2】および【全ての親3】は、本来あるべき稼動を行いません。
これは、モーション作成の際、カメラがセンターに追随した方がクオリティの高いモーションを
構築できるとの私自信の認識によります。
（通常、モーションは【全ての親】を使用して構築するものでは無いとの認識です。）
このため、現状では【全ての親2】と【全ての親3】を動かしても【センター】【足ＩＫ】は追随しません。
（【全ての親】はあるべき稼動を行います。）


【センター】【足ＩＫ】を【全ての親】に追随させる場合、下記の構成に再セットアップしてください。
-----------------------------
ID  : 親ID : ボーン名称
0   : -1   : 全ての親3
1   : 1    : 全ての親2
2   : 2    : 全ての親
3   : 3    : センター
-----------------------------

このセットアップを行っていただくと、全ての【全ての親】があるべき稼動を行うようになります。


●腕ＩＫについて
腕ＩＫのセットアップは、【腕】【ひじ】ボーンのみが追従するようにセットアップしてあります。
また、腕ＩＫの親は【肩】ボーンとなっております。
【肩】ボーンをＩＫ影響下に置きたい場合、PMDEditorで設定を変更していただく必要があります。

なお、現在存在する【初音ミク　腕ＩＫ版】とは、意図的にモーション共有を行えないよう、
名称を少し変えてセットアップしております。
【初音ミク　腕ＩＫ版】のＩＫボーン名称は【左腕IK】のように名称が半角となっております。
対して、永遠亭セットは【左腕ＩＫ】のように名称を全角とさせて頂いております。
これは、【初音ミク　腕ＩＫ版】とセットアップの意図が異なるためです。

ご理解くださいませ。


●マテリアル成分について
各モデルのセットアップにおいては、マテリアルのアンビエント成分を多めにしてあります。
これは、暗い画面において映えそうなモデルでしたので、暗色に色が潰されないようにしてある為です。
気になる場合はアンビエント成分を調整してください。

ちなみに、スペキュラが高めなのは私の趣味です。
気になるようでしたらスペキュラを落としてください。


●エンコーディングについて
トゥーンシェーディングを含め、永遠亭セットのマテリアル設定はエンコーディングの敵になる設定が
多くなっています。
特に、情報量の少ない背景（グラデーションなし、色数少なめ、ブラーなし、エッジ優先映像）では
破綻が多く見えてしまうかも知れません。
ただし、情報量の多い映像（グラデあり、色数多め、ブラーあり、グラデーション優先映像）においては
綺麗に見えるはずです。
人の目はエッジ（高コントラスト）や水平垂直には敏感ですが、グラデーション（低コントラスト）や
斜め・回転には鈍感なため、巧くやれば結構ごまかしがきくものです。

あまりに汚く見えてしまう場合、エンコ職人を頼るのも手かもしれません。




■■6.上手く動かす為には【Ｔｉｐｓ】■■
永遠亭セットを使用するさいの、ちょっとしたＴｉｐｓです。


●【〜ロングスカート〜１】をちょっと前に回転させておく。
何度も書いてますがこれをやる事で、ロングスカートが足に追従するようになります。
これをやらないと、スカートの直しで胃の痛い思いをしますので、必ず行ってください。


●ロングスカートは広げすぎない。
今回、ロングスカートは扱いやすさを考慮して４ツリーにしてあります。
この為、スカートボーンを広げるとコタツみたいになります。
うまい事カメラとボーン調整で魅せる絵を探してください。


●ＦＫを使わない
これも何度も書いてますが、ＦＫは使わないで下さい。
とても苦労します。かならず挫折すると思います。
ですので素直にＩＫを使用してください。


●ＩＫの基本は、ＩＫ自体と根元のＦＫで制御する
例えば、【ロングスカートＩＫ】を使用する場合、【ロングスカート１】を併用します。
【後髪ＩＫ】の場合、【後髪１】を併用します。
【○○１】のＦＫは、破綻の回避や大きなモーションの表情付けに使用されるＦＫボーンです。
つまり、モーションにあわせて【○○１】ボーンを少し回転させてあげる事で破綻を回避できます。


●かぐや（足追従）を使用する場合の足ＩＫの回転について
かぐやのスカートＩＫは、足ＩＫを親としています。
足ＩＫの変異影響を受ける為、足ＩＫに回転が与えられた場合、
スカートが破綻する事があります。

かぐやの場合、足はまず見えませんので、足ＩＫの回転を抑える事で
破綻を軽減する事ができます。
　１．足ＩＫのキーフレームを全て選択する。
　２．フレーム編集　→　フレーム位置角度補正を起動する。
　３．XYZ全ての回転について、0.01等の適当な値を入力し、回転を抑える。
　４．破綻が少なくなっている事を確認する。




■■7.あとがき■■
てゐをnyaさんがセットアップしてくれたっ＞＜ｂ
永遠亭が揃いましたっ！　完璧じゃないですかっ＞＜ｂ

あと、スカートは６チェインにしておけばよかったですね。。。
コタツですもん。。。現状だと。。。
ただ、６チェインにすると、弄るのが手間な気がしまして、現行のセットアップに落ち着きました。
ご意見等、あったらblogにでも書き込んでください。

また、えーりんのセットアップが結構荒いかも知れません。
えーりんは、コピペベースのセットアップ第１弾を飾ってもらってます。
その為、微妙にウェイト調整が甘いんです。髪とかスカートとか。
配布前にPMDEditorウェイトを直そうかと思い、実際にやってみましたが、やっぱりダメでした。
PMDEditorは、セットアップミスの修正には十分な機能があるんですが、
セットアップ自体を行うとなるとやはり荷が勝ちすぎてました。
まぁ、逆に上手く使えば絵になりますので、いいカメラを探してくださいませ。

最後になりましたが、東方原作のＺｕｎ様、ＭＭＤ開発者の樋口Ｍ様、
PMDEditor開発者の極北Ｐ様、にゃっぽんの皆様、MMD IRCの皆様、
そしてなにより、素晴らしいモデルをご提供いただいた、モンテコア様に
感謝と賛辞を贈らせていただきます。


お固いですか？ｗ
兎にも角にも、これでMMDがNND(NicoNicoDance)に発展すれば嬉しいな、と思ったりしています。
MMD界隈は楽しいですよ。是非、何か動画を作ってみてくださいな♪


【09/05/08追記】
かぐやの（というか、今までの流用全て）を見ていて、やっぱり誰もスカート直さないんだなぁ、
なんてしみじみ（？）思いまして、足削除セットアップを追加しました。
かぐやは足が見えないので、ダンスであれば特に問題なく使用できると思いますので、
使ってみてくださいな。
（もっとも、このセットアップだとロングスカート後の破綻が見えてしまうかもしれませんがｗ）





==================================================================
 モンテコア様
  小萌★スタジオ　　　  : http://comoesta.ferio.net/

 Nagisa Takaya(quinsiene)
  SuiChu-Ka -after tea- : http://quinmine.blog.shinobi.jp/
  e-mail                : 上記blog左のメニューより
 
  Nagisa Takaya (quinsiene or Budo-P) write.
==================================================================
